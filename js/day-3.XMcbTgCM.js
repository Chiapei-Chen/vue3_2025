import{c as $,e as B,p as T,q as b,r as F,b as I,f as N,g as S,s as L}from"./element-plus.CDiHoDQa.js";import{_ as U}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{r as f,ag as W,n as D,W as _,V as a,o as u,a as t,R as n,u as R,_ as c,$ as z,Z as M,c as P,ad as Z,M as j,F as q,av as A}from"./vendor.D13QUWO6.js";const G={class:"user-info"},H={class:"log-header"},J={class:"time"},K={__name:"day-3",setup(O){const i=f(""),o=f(null),p=f(!1),v=f([]),y=async l=>(await new Promise(e=>setTimeout(e,1500)),{name:`User ${l}`,email:`${l}@example.com`,phone:"1234567890"}),m=(l,e="info")=>{v.value.unshift({time:new Date().toLocaleTimeString(),message:l,type:e})};let h=0;return W(()=>{console.log("#### Effect searchQuery:",i.value),console.log("#### Effect effectVal:",h)}),D(i,async l=>{if(!l.trim()){o.value=null;return}h++;let e=!1;A(()=>{e=!0,m("取消前次搜索請求","warning")}),p.value=!0,m(`開始搜索: ${l}`,"primary");try{const r=await y(l);e||(o.value=r,m(`搜索完成: 找到使用者 ${r.name}`,"success"))}catch{e||m("搜索失敗","danger")}finally{e||(p.value=!1)}},{immediate:!0}),(l,e)=>{const r=B,g=T,E=b,V=F,d=$,k=I,w=N,x=S;return u(),_(d,{class:"cleanup-demo"},{header:a(()=>e[2]||(e[2]=[t("h3",null,"Vue 3.5 onWatcherCleanup 示範",-1)])),default:a(()=>[n(E,null,{default:a(()=>[n(g,{label:"搜索使用者"},{default:a(()=>[n(r,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),placeholder:"輸入使用者名稱","suffix-icon":R(L)},null,8,["modelValue","suffix-icon"])]),_:1})]),_:1}),p.value?(u(),_(d,{key:0,shadow:"never",class:"result-card"},{default:a(()=>[n(V,{rows:3,animated:""})]),_:1})):o.value?(u(),_(d,{key:1,shadow:"never",class:"result-card"},{header:a(()=>e[3]||(e[3]=[t("div",{class:"result-header"},"搜索結果",-1)])),default:a(()=>[t("div",G,[t("div",null,"姓名："+c(o.value.name),1),t("div",null,"郵箱："+c(o.value.email),1),t("div",null,"電話："+c(o.value.phone),1)])]),_:1})):z("",!0),n(d,{class:"mt-4"},{header:a(()=>[t("div",H,[e[5]||(e[5]=t("span",null,"操作日誌",-1)),n(k,{text:"",onClick:e[1]||(e[1]=s=>v.value=[])},{default:a(()=>e[4]||(e[4]=[M("清除日誌")])),_:1})])]),default:a(()=>[n(x,null,{default:a(()=>[(u(!0),P(q,null,Z(v.value,(s,C)=>(u(),_(w,{key:C,type:s.type},{default:a(()=>[t("span",J,c(s.time),1),t("span",{class:j(["message",s.type])},c(s.message),3)]),_:2},1032,["type"]))),128))]),_:1})]),_:1})]),_:1})}}},ee=U(K,[["__scopeId","data-v-59cb5dc6"]]);export{ee as default};
